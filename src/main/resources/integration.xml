<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:int="http://www.springframework.org/schema/integration"
	xmlns:int-http="http://www.springframework.org/schema/integration/http"
	xmlns:file="http://www.springframework.org/schema/integration/file"
	xsi:schemaLocation="http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration.xsd
        http://www.springframework.org/schema/integration/file http://www.springframework.org/schema/integration/file/spring-integration-file-2.2.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/integration/http http://www.springframework.org/schema/integration/http/spring-integration-http-2.2.xsd">


<int:inbound-channel-adapter id="coinbasePoller" expression="''" channel="coinbaseHttp">
    <int:poller fixed-rate="60000"/>
</int:inbound-channel-adapter>


 <int-http:outbound-gateway id='coinbasegateway'
     request-channel='coinbaseHttp'
     url='https://coinbase.com/api/v1/prices/buy'
     http-method='GET'
     expected-response-type='java.lang.String'
     charset='UTF-8'
     reply-timeout='10000'
     reply-channel='files'>     
 </int-http:outbound-gateway>
 
 <int:inbound-channel-adapter id="bitstampPoller" expression="''" channel="bitStampHttp">
    <int:poller fixed-rate="5000"/>
</int:inbound-channel-adapter>
 
 <int-http:outbound-gateway id='bitstampGateway'
     request-channel='bitStampHttp'
     url='https://www.bitstamp.net/api/ticker/'
     http-method='GET'
     expected-response-type='java.lang.String'
     charset='UTF-8'
     reply-timeout='5000'
     reply-channel='files'>     
 </int-http:outbound-gateway>

	<file:outbound-channel-adapter id="files"
		mode="APPEND" charset="UTF-8" directory="/tmp/si"
		filename-generator-expression="'HelloWorld'" />

</beans>